<template>
  <div>
    <a href="#" class="main-header-catalog__toggle-btn js-catalog-toggle">
      <span>Каталог товаров</span>
      <svg xmlns="http://www.w3.org/2000/svg" width="8" height="4" viewBox="0 0 8 4">
        <path fill="#fff" fill-rule="evenodd" d="M0 0h8L4 4z" /></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="16" viewBox="0 0 18 16">
        <g fill="none" fill-rule="evenodd">
          <rect width="11" height="2" x="7" y="1" fill="#FFF" rx="1" />
          <circle cx="2" cy="2" r="1" stroke="#FFF" stroke-width="2" />
          <rect width="11" height="2" x="7" y="7" fill="#FFF" rx="1" />
          <circle cx="2" cy="8" r="1" stroke="#FFF" stroke-width="2" />
          <rect width="11" height="2" x="7" y="13" fill="#FFF" rx="1" />
          <circle cx="2" cy="14" r="1" stroke="#FFF" stroke-width="2" />
        </g>
      </svg>
    </a>

    <div class="main-header-catalog__nav-wrap">
      <button type="button" class="main-header-catalog__nav-wrap__back-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="7" height="10" viewBox="0 0 7 10">
          <path fill="none" fill-rule="evenodd" stroke="#121212" stroke-linecap="round" stroke-width="2"
                d="M6 9L2 5l4-4" opacity=".4" /></svg>
        Назад
      </button>
      <div class="main-header-catalog__nav-wrap__head">
        Каталог товаров
      </div>
      <nav class="scroll-area">
        <ul>
          <li class="with-subnav">
            <a href="#">Аксессуары</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Аксессуары</h3>
              <ul>
                <li class="with-subnav">
                  <a href="#">Упаковка</a>
                  <div>
                    <h3>Упаковка</h3>
                    <ul>
                      <li><a href="#">Упаковка</a></li>
                      <li class="with-subnav">
                        <a href="#">Творчество</a>
                        <div>
                          <h3>Творчество</h3>
                          <ul>
                            <li><a href="#">Упаковка</a></li>
                            <li><a href="#">Творчество</a></li>
                            <li><a href="#">Товары для праздника</a></li>
                            <li><a href="#">Канцтовары</a></li>
                            <li><a href="#">Одежда, обувь и аксессуары</a></li>
                            <li><a href="#">Фотоальбомы и фоторамки</a></li>
                            <li><a href="#">Игрушки</a></li>
                            <li><a href="#">Игры</a></li>
                            <li><a href="#">Спорттовары</a></li>
                            <li><a href="#">Выпускной</a></li>
                            <li><a href="#">Подарочные наборы</a></li>
                            <li><a href="#">Интерьерные сувениры</a></li>
                            <li><a href="#">Брелки</a></li>
                            <li><a href="#">Магниты</a></li>
                            <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                            <li><a href="#">Подарочные наборы</a></li>
                            <li><a href="#">Интерьерные сувениры</a></li>
                            <li><a href="#">Брелки</a></li>
                            <li><a href="#">Магниты</a></li>
                          </ul>
                        </div>
                      </li>
                      <li><a href="#">Товары для праздника</a></li>
                      <li><a href="#">Канцтовары</a></li>
                      <li><a href="#">Одежда, обувь и аксессуары</a></li>
                      <li><a href="#">Фотоальбомы и фоторамки</a></li>
                      <li><a href="#">Игрушки</a></li>
                      <li><a href="#">Игры</a></li>
                      <li><a href="#">Спорттовары</a></li>
                      <li><a href="#">Выпускной</a></li>
                      <li><a href="#">Подарочные наборы</a></li>
                      <li><a href="#">Интерьерные сувениры</a></li>
                      <li><a href="#">Брелки</a></li>
                      <li><a href="#">Магниты</a></li>
                      <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                      <li><a href="#">Подарочные наборы</a></li>
                      <li><a href="#">Интерьерные сувениры</a></li>
                      <li><a href="#">Брелки</a></li>
                      <li><a href="#">Магниты</a></li>
                    </ul>
                  </div>
                </li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Головные уборы</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Головные уборы</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Галантерея</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Галантерея</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Игрушки</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Игрушки</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Подарки и сувениры</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Подарки и сувениры</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Обувь</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Обувь</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Очки и футляры</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Очки и футляры</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Телемаркет</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Телемаркет</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Канцелярия</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Канцелярия</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Ранцы и рюкзаки</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Ранцы и рюкзаки</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
          <li class="with-subnav">
            <a href="#">Спорт и отдых</a>
            <div style="background-image: url(/assets/img/uploads/main-header-catalog-subnav-bg.jpg)">
              <h3>Спорт и отдых</h3>
              <ul>
                <li><a href="#">Упаковка</a></li>
                <li><a href="#">Творчество</a></li>
                <li><a href="#">Товары для праздника</a></li>
                <li><a href="#">Канцтовары</a></li>
                <li><a href="#">Одежда, обувь и аксессуары</a></li>
                <li><a href="#">Фотоальбомы и фоторамки</a></li>
                <li><a href="#">Игрушки</a></li>
                <li><a href="#">Игры</a></li>
                <li><a href="#">Спорттовары</a></li>
                <li><a href="#">Выпускной</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
                <li class="more"><a href="#" class="btn btn--default">Смотреть все</a></li>
                <li><a href="#">Подарочные наборы</a></li>
                <li><a href="#">Интерьерные сувениры</a></li>
                <li><a href="#">Брелки</a></li>
                <li><a href="#">Магниты</a></li>
              </ul>
            </div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</template>
<script>
  import PerfectScrollbar from 'perfect-scrollbar';

  export default {

    created() {

      if (process.client) {


        $(document).ready(function () {
          const $mainHeaderCatalog = $('.main-header-catalog');
          const $scrollArea = $mainHeaderCatalog.find('.scroll-area').get(0);
          let ps;
          if (window.innerWidth >= 1200) {
            $($scrollArea).css('max-height', $(window).innerHeight() - 100);
            $($scrollArea).css('position', 'relative');
            ps = new PerfectScrollbar($scrollArea, {suppressScrollX: true});
          }

          $(window).on('resize', function () {
            if (window.innerWidth < 1200) {
              $($scrollArea).css('max-height', 'initial');
              $($scrollArea).css('position', 'initial');
              if (ps) {
                ps.destroy();
                ps = undefined;
              }
            } else {
              if (typeof ps === 'undefined') {
                ps = new PerfectScrollbar($scrollArea, {suppressScrollX: true});
              }
              $($scrollArea).css('position', 'relative');
              $($scrollArea).css('max-height', $(window).innerHeight() - 100);
              ps.update();
            }
          });

          /**
           * Show subnav on hover on desktop
           */
          $mainHeaderCatalog.find('nav > ul > li ').on('mouseenter', function () {
            if (window.innerWidth < 1200) return false;

            if ($(this).find('> div').length) {
              $mainHeaderCatalog.addClass('subnav-open');
            } else {
              $mainHeaderCatalog.removeClass('subnav-open');
            }
          });

          $mainHeaderCatalog.find('.main-header-catalog__nav-wrap').on('mouseleave', function () {
            $mainHeaderCatalog.removeClass('subnav-open');
          });

          /**
           * Open subnav on tablets and mobile
           */
          $mainHeaderCatalog.find('li.with-subnav > a').on('click', function (e) {
            if (window.innerWidth < 1200) {
              // $(this).parent('li').addClass('subnav-open');
              // e.preventDefault();
            }
          });

          /**
           * Back btn
           */
          $('.main-header-catalog__nav-wrap__back-btn').on('click', function (e) {
            const lastSubnavOpen = $mainHeaderCatalog.find('.subnav-open:last');

            if (lastSubnavOpen.length) {
              $mainHeaderCatalog.find('.subnav-open:last').removeClass('subnav-open');
            } else {
              $mainHeaderCatalog.find('.main-header-catalog__nav-wrap').removeClass('active');
            }

            e.preventDefault();
          });

          let onOpenScrollTop = 0;

          /**
           * OPen nav on tablets and mobile
           */
          $('.js-catalog-toggle').on('click', function (e) {
            if (window.innerWidth > 1199) return false;
            $mainHeaderCatalog.find('.main-header-catalog__nav-wrap').toggleClass('active');
            e.preventDefault();
          });

        });
      }
    }

  }

</script>